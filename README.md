# Automation Dashboard - Flask Web GUI

A simple, secure, lightweight web interface to trigger existing Python automation scripts on a Linux server.

## Features

- **Authentication**: Simple login system with hardcoded admin user
- **Dashboard**: Execute Ansible playbooks, PowerShell scripts, and shell scripts
- **Dynamic File Selection**: Automatically scans directories for available files
- **Log Viewer**: View and browse log files generated by scripts
- **Responsive Design**: Mobile-friendly interface using Bootstrap 5
- **HTTPS Support**: Optional self-signed certificate support
- **Activity Logging**: Tracks user actions and script executions
- **user creation**: allows for user creation and management

## Requirements

- Python 3.6+
- Flask
- Existing automation scripts in the specified directories

## Installation

### 1. Install Flask
```bash
pip install flask
```

### 2. Set up Directory Structure
Ensure you have the following directory structure in the same folder as `app.py`:

```
.
├── app.py                    # Main Flask application
├── playbooks/                # Directory containing .yml, .sh, .ps1 files
│   ├── example.yml
│   ├── script.sh
│   └── script.ps1
├── inventory/                # Directory containing .ini files
│   ├── hosts.ini
│   └── production.ini
├── logs/                     # Directory for log files (auto-created)
├── run_ansible.py           # Ansible wrapper script
├── run_powershell_with_ansible.py  # PowerShell wrapper script
└── run_sh_with_ansible.py   # Shell script wrapper
```

### 3. Configure the Application
Edit the configuration section in `app.py`:

```python
# Configuration - CHANGE THIS PASSWORD IN PRODUCTION
ADMIN_PASSWORD = 'admin123'  # Change this to your desired password

# Server configuration
HOST = '0.0.0.0'
PORT = 8443
DEBUG = False
USE_HTTPS = False  # Set to True to enable HTTPS with self-signed certificates
```

## Security Configuration

### Change Default Password
Before deploying to production:
add config.json to the same directory as app.py
it will contain the following:
```json
{
    "secret_key": "your-secret-key-change-this-in-production",
    "users": {
        "admin": "admin123",
        "user1": "password123"
    },
    "host": "0.0.0.0",
    "port": 8443,
    "debug": false,
    "use_https": false
}
```

### Enable HTTPS
To enable HTTPS with self-signed certificates:

1. Set `USE_HTTPS = True` in the configuration
2. The application will automatically generate self-signed certificates
3. Access the application via `https://your-server:8443`

```json
"use_https": true
```

**Note**: When using HTTPS for the first time, you'll see a browser warning about the self-signed certificate. This is normal - click "Advanced" and "Proceed to continue".

## Running the Application

### Basic HTTP Server

```bash
python3 app.py
```

### HTTPS Server (with self-signed certificates)
1. Set `USE_HTTPS = True` in `app.py`
2. Run the application:
```bash
python3 app.py
```

The server will start on `https://0.0.0.0:8443`

## Usage

### 1. Login
- Navigate to `http://your-server:8443` (or `https://your-server:8443` if HTTPS is enabled)
- Login with:
  - Username: `admin`
  - Password: (whatever you set in `ADMIN_PASSWORD`)

### 2. Dashboard - Execute Tasks
1. Select **Task Type** from the dropdown:
   - "Run Ansible Playbook" (uses `run_ansible.py`)
   - "Run PowerShell Script" (uses `run_powershell_with_ansible.py`)
   - "Run Shell Script" (uses `run_sh_with_ansible.py`)

2. Select **Target File** - automatically filtered based on task type:
   - `.yml` files for Ansible
   - `.ps1` files for PowerShell
   - `.sh` files for Shell scripts

3. Select **Inventory** - shows `.ini` files from the inventory directory

4. Click **Execute** to run the command

### 3. Log Viewer
- Click on any log file in the left panel to view its content
- Log files are sorted by newest first
- View raw log content in the right panel

## Command Execution Logic

When you click "Execute", the application runs:

```bash
python3 {selected_script_wrapper} --playbooks ./playbooks/{selected_file} --inventory ./inventory/{selected_inventory}
```

The command is executed in the background using `subprocess.Popen()` so the web interface remains responsive.

## File Management

### Adding New Scripts
Simply place your files in the appropriate directories:

- **Ansible Playbooks**: `./playbooks/*.yml`
- **PowerShell Scripts**: `./playbooks/*.ps1`
- **Shell Scripts**: `./playbooks/*.sh`
- **Inventory Files**: `./inventory/*.ini`

The web interface will automatically detect and display them.

### Log Files
Log files should be written to the `./logs/` directory by your automation scripts. The log viewer will automatically detect and display any files in this directory.

## Security Considerations

1. **Change the default password** before deploying to production
2. **Use HTTPS** in production environments
3. **Firewall**: Ensure only authorized IPs can access port 8443
4. **File permissions**: Set appropriate permissions on your script files
5. **Network security**: Consider using a reverse proxy (nginx/Apache) for additional security

## Troubleshooting

### Common Issues

1. **"Script wrapper not found" error**
   - Ensure the wrapper scripts (`run_ansible.py`, `run_powershell_with_ansible.py`, `run_sh_with_ansible.py`) exist in the same directory as `app.py`
   - Check file permissions

2. **"Target file not found" error**
   - Verify your files are in the correct directories (`./playbooks/` and `./inventory/`)
   - Check file extensions match the expected types

3. **HTTPS Certificate Issues**
   - Self-signed certificates will show browser warnings - this is normal
   - For production, consider using proper SSL certificates

4. **Port Already in Use**
   - Change the PORT configuration in `app.py`
   - Or stop the service using that port: `sudo netstat -tulpn | grep :8443`

### Debug Mode
For development, you can enable debug mode:

```python
DEBUG = True
```

This will provide detailed error messages and auto-reload on code changes.

## Support

If you encounter issues:

1. Check the console output when running `python3 app.py`
2. Verify all directory paths are correct
3. Ensure Python 3 and Flask are properly installed
4. Check file permissions on all scripts and directories

## Running as a Service

For production deployment, consider running the application as a systemd service:

1. Create a service file: `/etc/systemd/system/automation-dashboard.service`
2. Add the following content (adjust paths as needed):

```ini
[Unit]
Description=Automation Dashboard
After=network.target

[Service]
Type=simple
User=your-username
WorkingDirectory=/path/to/your/app
ExecStart=/usr/bin/python3 /path/to/your/app/app.py
Restart=always

[Install]
WantedBy=multi-user.target
```

3. Enable and start the service:
```bash
sudo systemctl enable automation-dashboard
sudo systemctl start automation-dashboard
```

## License

This project is provided as-is for automation purposes. Please ensure you have proper security measures in place before deploying to production environments.

This project is licensed under the MIT License. 
